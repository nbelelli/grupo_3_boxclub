<%- include('../partials/head') %> <%- include('../partials/header') %>
<html>
	<body>
		<div style="margin-top: 30; margin-left: 100px">
			<span>
				<a class="icono_go_back" href="#" id="back_button">
					<i class="fas fa-long-arrow-alt-left fa-lg"> Volver</i>
				</a>
			</span>
		</div>
		<!-- SEARCH -->

		<div class="container" style="margin-top: 100px; width: 80%">
			<div class="row">
				<div class="col">
					<div class="input-group">
						<input
							type="text"
							class="form-control"
							aria-label=""
							placeholder="Buscar por nombre, apellido รณ user name"
							aria-describedby="basic-addon1"
						/>
						<div class="input-group-append">
							<button class="btn btn-success" type="button">Buscar</button>
						</div>
					</div>
				</div>
				<div class="col">
					<a href="/admin/users/create" class="btn btn-primary"
						>+ Crear Admin</a
					>
				</div>
			</div>
		</div>


		<!-- Button trigger modal -->

		<!-- Modal -->
		<div
			class="modal fade"
			id="confirmationModal"
			tabindex="-1"
			aria-labelledby="confirmationModalLabel"
			aria-hidden="true"
		>
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="confirmationModalLabel">
							Eliminar el usuario:
						</h5>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div id="modalUserName" class="modal-body">juan Perez</div>
					<div class="modal-footer">
						<button
							type="button"
							class="btn btn-secondary"
							data-bs-dismiss="modal"
						>
							Cancelar
						</button>
						<form id="deleteForm" style="display: inline" method="POST">
							<button class="btn btn-danger" type="submit">Borrar</button>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- TABLA -->
		<div style="margin-top: 100px; width: 80%" class="container">

			<table class="table">
				<thead class="thead-dark">
					<tr>
						<th>#</th>
						<th>Nombre</th>
						<th>User</th>
						<th>Rol</th>
						<th>Accion</th>
					</tr>
				</thead>
				<tbody>
					<% for (user of users){ %>
					<tr>
						<th scope="row"><%= user.id %></th>
						<td><%= user.name+' '+user.lastname %></td>
						<td><%= user.email %></td>

						<% if(user.rol==10){ %>
						<td>Cliente</td>
						<% } %> <% if(user.rol==20){ %>
						<td>Admin</td>
						<% } %> <% if(user.rol==30){ %>
						<td>Superadmin</td>
						<% } %>

						<td>
							<a
								href="/Admin/users/<%= user.id %> "
								class="btn btn-primary btn-sm"
							>
								<i class="fas fa-info-circle"></i>
							</a>
							<a
								href="/admin/users/<%= user.id %>/edit"
								class="btn btn-secondary btn-sm"
							>
								<i class="fas fa-edit"></i>
							</a>

							<button <%="id=" + user.id %>
								<%= "userName=" +user.name%> <%= "userLastName= " +user.lastname
								%> type="button" class="btn btn-danger btn-sm deleteButton"
								data-bs-toggle="modal" data-bs-target="#confirmationModal" >
								<i class="fas fa-trash-alt"></i>
							</button>
						</td>
					</tr>
					<% } %>
				</tbody>
			</table>
		</div>
		<script src="/javascripts/history.js"></script>
		<script src="/javascripts/deleteModal.js"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
			crossorigin="anonymous"
		></script>
	</body>
	<%- include('../partials/footer') %>
</html>
